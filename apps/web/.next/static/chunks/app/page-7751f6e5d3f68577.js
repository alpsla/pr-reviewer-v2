(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4936:function(e,t,a){Promise.resolve().then(a.bind(a,7603))},5706:function(e,t,a){"use strict";a.d(t,{G:function(){return n}});var r=a(5343),s=a(5634);function n(e){let{size:t="medium",message:a="Loading...",fullScreen:n=!1}=e;return(0,r.jsx)("div",{className:n?"fixed inset-0 bg-background/80 backdrop-blur-sm":"w-full h-full",children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[200px]",children:[(0,r.jsx)(s.Z,{className:"".concat({small:"h-4 w-4",medium:"h-8 w-8",large:"h-12 w-12"}[t]," animate-spin text-primary"),"aria-label":"Loading",role:"status"}),a&&(0,r.jsx)("p",{className:"mt-4 text-sm text-muted-foreground",children:a})]})})}},4843:function(e,t,a){"use strict";a.d(t,{z:function(){return d}});var r=a(5343),s=a(6676),n=a(7516),i=a(2562),o=a(7686);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:a,variant:s,size:i,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,r.jsx)(u,{className:(0,o.cn)(l({variant:s,size:i,className:a})),ref:t,...c})});d.displayName="Button"},7603:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return P}});var r=a(5343),s=a(6676),n=a(2206),i=a(8023),o=a(7686);let l=n.fC,d=n.xz,c=n.h_;n.x8;let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});u.displayName=n.aV.displayName;let m=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(n.VY,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l,children:[s,(0,r.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.VY.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})}).displayName=n.Dx.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...s})}).displayName=n.dk.displayName;var f=a(4843),h=a(2507),x=a(5892),p=a(5786),g=a(604),b=a(1286),y=a(4450);let w=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...s})});w.displayName="Card";let N=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",a),...s})});N.displayName="CardHeader",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,o.cn)("font-semibold leading-none tracking-tight",a),...s})}).displayName="CardTitle",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...s})}).displayName="CardDescription";let v=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",a),...s})});v.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter";let j=s.forwardRef((e,t)=>{let{className:a,type:s,...n}=e;return(0,r.jsx)("input",{type:s,className:(0,o.cn)("flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...n})});j.displayName="Input";var k=a(8736);a(9050);let C="https://ftjhmbbcuqjqmmbaymqb.supabase.co",I="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ0amhtYmJjdXFqcW1tYmF5bXFiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzg4NTk3MzQsImV4cCI6MjA1NDQzNTczNH0.coUpXWXWCuztUyaGSHx1-qfL1CG5wlVh3I33Rq6NMNI";if(!C)throw Error("Missing env.NEXT_PUBLIC_SUPABASE_URL");if(!I)throw Error("Missing env.NEXT_PUBLIC_SUPABASE_ANON_KEY");let R=(0,k.eI)(C,I);class z extends Error{constructor(e){super(e),this.name="AuthError"}}async function E(e,t){try{let{data:{session:a},error:r}=await R.auth.getSession();if(r)throw console.error("Failed to check session:",r),new z("Failed to check authentication status");if(a)throw console.warn("User is already signed in, redirecting..."),new z("You are already signed in");if("email"===e&&t)return console.info("Initiating email authentication for:",t),await R.auth.signInWithOtp({email:t,options:{shouldCreateUser:!0,emailRedirectTo:"".concat(window.location.origin,"/auth/callback?next=/dashboard")}});return console.info("Initiating OAuth flow for provider:",e),await R.auth.signInWithOAuth({provider:e,options:{redirectTo:"".concat(window.location.origin,"/auth/callback?next=/dashboard"),scopes:"read:user user:email"}})}catch(e){throw console.error("Auth error:",e instanceof Error?e.message:"Unknown error"),e}}var S=a(5706);let A={github:{icon:p.Z,label:"Continue with GitHub"},gitlab:{icon:g.Z,label:"Continue with GitLab"},google:{icon:b.Z,label:"Continue with Google"},azure:{icon:g.Z,label:"Continue with Azure"},email:{icon:y.Z,label:"Continue with Email"}};function _(){let e=(0,x.useRouter)(),[t,a]=(0,s.useState)(""),[n,i]=(0,s.useState)(!1),[o,l]=(0,s.useState)(null),[d,c]=(0,s.useState)(!1),[u,m]=(0,s.useState)(!0),p=(0,s.useRef)(null),g=(0,h.createClientComponentClient)();(0,s.useEffect)(()=>{(async()=>{try{var t;let a=await g.auth.getSession();if(null==a?void 0:null===(t=a.data)||void 0===t?void 0:t.session){e.push("/console");return}}catch(e){console.error("Session check failed:",e)}m(!1)})()},[e,g.auth]);let b=async e=>{if(!d){if(l(null),c(!0),"email"===e){i(!0),c(!1);return}try{await E(e)}catch(e){e instanceof z?l(e.message):(l("Authentication failed. Please try again."),console.error("Auth error:",e)),c(!1)}}},y=async e=>{if(e.preventDefault(),t&&!d){l(null),c(!0);try{let{error:e}=await E("email",t);if(e)throw e;l("Check your email for the magic link.")}catch(e){l(e instanceof Error?e.message:"Failed to send magic link")}finally{c(!1)}}};return u?(0,r.jsx)(S.G,{message:"Initializing..."}):(0,r.jsxs)(w,{className:"w-full max-w-md mx-auto",ref:p,children:[(0,r.jsxs)(N,{className:"space-y-1",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-center",children:"Welcome to PR Reviewer"}),o&&(0,r.jsx)("div",{className:"text-sm text-red-500 text-center mt-2",role:"alert","data-testid":"error-message",children:o})]}),(0,r.jsxs)(v,{className:"flex flex-col space-y-4",children:[(0,r.jsxs)("div",{className:"w-full space-y-2",children:[!n&&(0,r.jsx)("div",{className:"space-y-2",children:Object.keys(A).map(e=>{let{icon:t,label:a}=A[e];return(0,r.jsxs)(f.z,{onClick:()=>b(e),disabled:d,"data-testid":"".concat(e,"-button"),variant:"outline",className:"w-full flex items-center justify-start bg-background hover:bg-accent",children:[(0,r.jsx)(t,{className:"h-4 w-4 mr-2"}),(0,r.jsx)("span",{children:a})]},e)})}),n&&(0,r.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,r.jsx)(j,{type:"email",placeholder:"Enter your email",value:t,onChange:e=>a(e.target.value),required:!0,className:"w-full",disabled:d}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(f.z,{type:"button",variant:"ghost",onClick:()=>{i(!1),a(""),l(null)},disabled:d,children:"Back"}),(0,r.jsx)(f.z,{type:"submit",disabled:d||!t,className:"flex-1",children:"Continue with Email"})]})]})]}),(0,r.jsxs)("div",{className:"text-center text-sm text-muted-foreground",children:["By continuing, you agree to our"," ",(0,r.jsx)("a",{href:"/terms",className:"text-black underline hover:text-primary",children:"Terms of Service"})," ","and"," ",(0,r.jsx)("a",{href:"/privacy",className:"text-black underline hover:text-primary",children:"Privacy Policy"})]})]})]})}function O(){let[e,t]=(0,s.useState)(!1);return(0,r.jsxs)(l,{open:e,onOpenChange:t,children:[(0,r.jsx)(d,{asChild:!0,children:(0,r.jsx)(f.z,{children:"Join PR Reviewer"})}),(0,r.jsx)(m,{className:"sm:max-w-md",children:(0,r.jsx)(_,{})})]})}function P(){return(0,r.jsxs)("main",{className:"min-h-screen bg-background",children:[(0,r.jsx)("header",{className:"fixed top-0 w-full bg-background border-b",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-xl font-bold",children:"PR Reviewer"}),(0,r.jsx)(O,{})]})}),(0,r.jsx)("div",{className:"container mx-auto px-4 pt-24",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto text-center py-20",children:[(0,r.jsx)("h2",{className:"text-4xl font-bold tracking-tight",children:"Automated Code Review Assistant"}),(0,r.jsx)("p",{className:"mt-4 text-lg text-muted-foreground",children:"Get instant, intelligent feedback on your pull requests. Improve code quality and speed up your development workflow."})]})})]})}},7686:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var r=a(3181),s=a(798);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,r.W)(t))}}},function(e){e.O(0,[954,938,346,653,834,744],function(){return e(e.s=4936)}),_N_E=e.O()}]);