(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{5659:function(e,n,s){Promise.resolve().then(s.bind(s,9936))},9936:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return c}});var o=s(5343);s(303);var t=s(2507),r=s(5892),i=s(6676);function a(e){let{children:n}=e,s=(0,r.useRouter)(),a=(0,t.createClientComponentClient)();return(0,i.useEffect)(()=>{let e=async()=>{if(window.location.hash&&window.location.hash.includes("access_token")){console.log("Found access token in URL hash");try{let e=new URLSearchParams(window.location.hash.substring(1)),n=e.get("access_token"),o=e.get("refresh_token");if(n&&o){console.log("Setting up session from tokens");let{data:e,error:t}=await a.auth.setSession({access_token:n,refresh_token:o});if(t){console.error("Error setting session:",t);return}e.session&&(console.log("Session established, redirecting to dashboard"),window.location.hash="",s.push("/dashboard"))}}catch(e){console.error("Error processing hash token:",e)}}},{data:{subscription:n}}=a.auth.onAuthStateChange((e,n)=>{console.log("Auth state change:",e,n?"Has session":"No session",n),"SIGNED_IN"===e&&n?(console.log("User signed in, redirecting to dashboard"),s.push("/dashboard")):"SIGNED_OUT"===e&&(console.log("User signed out, redirecting to home"),s.push("/"))});return e(),()=>{n.unsubscribe()}},[s,a.auth]),(0,o.jsx)(o.Fragment,{children:n})}function c(e){let{children:n}=e;return(0,o.jsx)("html",{lang:"en",children:(0,o.jsx)("body",{children:(0,o.jsx)(a,{children:n})})})}},303:function(){}},function(e){e.O(0,[954,653,834,744],function(){return e(e.s=5659)}),_N_E=e.O()}]);